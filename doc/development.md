# Описание взаимодействия с ботом


## Алгоритм общения

1. здоровается, предлагает выбрать мероприятие
2. отправляет мероприятие
3. просит контакты
4. оплата:
    - скидывает реквизиты для оплаты
    - просит прислать фотографию
    - предлагает ознакомиться с условиями возврата
5. при загрузке фото, просит дождаться потверждения
6. присылает потверждение
7. напоминает за день о мероприятии


## Задачи

### В работе

- chanel: убирать клавиши потвержения, если они были нажаты
- chanel: посмотреть лог когда пришло много уведомлений
- chanel: добавить уведомление кто нажал на клавиши потверждения и отправки уведомления
- chanel: указывать количество отправленных уведомлений
- chanel: указывать почему клавиши не актуальны
- chanel: разобраться почему на следующий день не отправляются уведомления
- chanel: добавить возможность отправить любое сообщение конкретному контакту через бот
- bot: добавить время для очистки стейта с данными мероприятий
- bot: фильтрация событий по дате
- bot: добавить проверку даты при поиске мероприятий
- dev: увеличить кол-во строк для записи
- dev: добавить статус "завершилось оформление" для логов и его автоматический сброс при новом взаимодействии с ботом
- dev: проверить что отсутвие афиши не приводит к ошибкам
- bot: добавить сообщение что мероприятий нет

- dev: добавить обработку ошибок
  - нехватает переменных окружения
  - потеря связи, перезагрузка

### Готово

- ~~добавить логирование~~
- ~~сделать ограничение по времени сессии~~
- ~~запретить поторные уведомления о успешности или проблем с покупкой из канала~~
- ~~добавить отправку напоминания из канала~~
- ~~нужен модуль который будет отвечать за получение данных~~
  - ~~получить массив строк~~
  - ~~преобразовать его в объект для работы~~
- ~~модуль для записи данных~~
- ~~состояние покупки и сброс до начального состояния~~
- ~~добавить предупреждение, если введено больше билетов чем доступно~~
- ~~добавить меню с коммандами~~
- ~~убрать клавиши "выборать други мероприятия"~~


## Вопросы

- должен ли предлагать мероприятия, где SOLD OUT
- нужна ли возмозможность выключить напоминание
- нужно добавлять проверку на бота


## Доп функции

- админка
- реклама
- подписка на мероприятия
- сообщать что мероприятий нет, но предлагать подписаться, если появятся
- посмотреть своию историю
- хранить старые мероприятия
- отдельный канал для информации
